<!DOCTYPE html>

<html>

<head>
  <meta charset="utf-8" />
  <title>Part 4 Matching Game!</title>
  <meta content="Julien" name="author">
</head>

<style>
  img {
    position: absolute;
  }

  div {
    position: absolute;
    width: 500px;
    height: 500px;
  }

  #rightSide {
    left: 500px;
    border-left: 1px solid black;
  }

  #rightSide {}
</style>

<body onload="generateFaces()">

  <h1>Matching Game</h1>
  <p>Click on the extra smiling face on the left.</p>

  <div id="leftSide">
    <!--this div node will display all of the faces on the left side of the screen
      faces are dynamically added using javascript-->
  </div>
  <div id="rightSide">
    <!--this div node will display all of the faces on the right side of the screen
      cloneNode(true) is used to copy the faces to the right side, and the last child of this branch is deleted, such that there are more faces on the left side.
  -->
  </div>

  <script>
    var numberOfFaces = 5;
    var theLeftSide = document.getElementById("leftSide");
    var theRightSide = document.getElementById("rightSide");
    var theBody = document.getElementsByTagName("body")[0];

    function generateFaces() {
      for (var i = 0; i < numberOfFaces; i++) {
        //Set of an new image to image object
        var img = new Image();
        img.src = "smile.png";

        // get div & img sizes
        var divHeight = theLeftSide.offsetHeight;
        var imgHeight = img.height;
        var divWidth = theLeftSide.offsetHeight;
        var imgWidth = img.width;

        // alert("divHeight = " + divHeight + " and imgHeight = " + imgHeight);
        //Random top position of img
        var top_position = Math.random() * (divHeight - imgHeight);
        top_position = Math.floor(top_position);
        //Random left position of img
        var left_position = Math.random() * (divWidth - imgWidth);
        left_position = Math.floor(left_position);
        //debug
        // alert("top_position = " + top_position + " and left_position = " + left_position);

        //set of top and left attributes to img
        img.style.top = top_position + "px";
        img.style.left = left_position + "px";
        //created image to the leftSide div
        theLeftSide.appendChild(img);
      }
      // copy the leftSide div e.g. leftSideImages
      var leftSideImages = theLeftSide.cloneNode(true);
      leftSideImages.removeChild(leftSideImages.lastChild);
      theRightSide.appendChild(leftSideImages);

      //event handler function to the extra face
      theLeftSide.lastChild.onclick = function nextLevel(event) {
        event.stopPropagation();
        // delete all img
        while (theLeftSide.firstChild) {
          theLeftSide.removeChild(theLeftSide.firstChild);
        }
        while (theRightSide.firstChild) {
          theRightSide.removeChild(theRightSide.firstChild);
        }
        numberOfFaces += 5;
        generateFaces();
      };

      // gameover
      theBody.onclick = function gameOver() {
        alert("Game Over!");
        theBody.onclick = null;
        theLeftSide.lastChild.onclick = null;
      };
    }
  </script>

</body>

</html>
